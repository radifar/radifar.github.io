<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Lets Create A Domain-Specific Language for Molecular Interaction Analysis! | Radifar</title>
<meta name=keywords content="python,lark,DSL,interaction-fingerprinting"><meta name=description content="What is a Domain-Specific Language? It is more common than you think.
Few of us – computational chemists – have heard the term Domain-Specific Language (DSL for short), even though this is somewhat ubiquitous in our workflow, especially when dealing with molecule visualisation. Don&rsquo;t you believe me? Check out the command you type on VMD, PyMOL, YASARA, or Chimera.
YASARA command:
LoadPDB 1crn, download=yes
AutoPosOriObj 1, x = 1, y = 10, z = 0, alpha = 0, beta = 0, gamma = 0
ColorRes cys, green
ShowRes cys
BallStickRes cys
AutoRotateObj 1, Y = 1
wait 180
AutoRotateObj 1, Y = 0
ZoomRes Cys 16, step = 50
wait 100
ZoomRes all
VMD Tcl/Tk command:"><meta name=author content="Muhammad Radifar"><link rel=canonical href=https://radifar.github.io/posts/lets-create-domain-specific-language-molecular-interaction-analysis/><meta name=google-site-verification content="UA-169376222-1"><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://radifar.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://radifar.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://radifar.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://radifar.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://radifar.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://radifar.github.io/posts/lets-create-domain-specific-language-molecular-interaction-analysis/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-SD190KJPLL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SD190KJPLL")}</script><meta property="og:url" content="https://radifar.github.io/posts/lets-create-domain-specific-language-molecular-interaction-analysis/"><meta property="og:site_name" content="Radifar"><meta property="og:title" content="Lets Create A Domain-Specific Language for Molecular Interaction Analysis!"><meta property="og:description" content="What is a Domain-Specific Language? It is more common than you think. Few of us – computational chemists – have heard the term Domain-Specific Language (DSL for short), even though this is somewhat ubiquitous in our workflow, especially when dealing with molecule visualisation. Don’t you believe me? Check out the command you type on VMD, PyMOL, YASARA, or Chimera.
YASARA command:
LoadPDB 1crn, download=yes AutoPosOriObj 1, x = 1, y = 10, z = 0, alpha = 0, beta = 0, gamma = 0 ColorRes cys, green ShowRes cys BallStickRes cys AutoRotateObj 1, Y = 1 wait 180 AutoRotateObj 1, Y = 0 ZoomRes Cys 16, step = 50 wait 100 ZoomRes all VMD Tcl/Tk command:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-05T04:15:02+00:00"><meta property="article:modified_time" content="2023-05-05T04:15:02+00:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Lark"><meta property="article:tag" content="DSL"><meta property="article:tag" content="Interaction-Fingerprinting"><meta property="og:image" content="https://radifar.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://radifar.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Lets Create A Domain-Specific Language for Molecular Interaction Analysis!"><meta name=twitter:description content="What is a Domain-Specific Language? It is more common than you think.
Few of us – computational chemists – have heard the term Domain-Specific Language (DSL for short), even though this is somewhat ubiquitous in our workflow, especially when dealing with molecule visualisation. Don&rsquo;t you believe me? Check out the command you type on VMD, PyMOL, YASARA, or Chimera.
YASARA command:
LoadPDB 1crn, download=yes
AutoPosOriObj 1, x = 1, y = 10, z = 0, alpha = 0, beta = 0, gamma = 0
ColorRes cys, green
ShowRes cys
BallStickRes cys
AutoRotateObj 1, Y = 1
wait 180
AutoRotateObj 1, Y = 0
ZoomRes Cys 16, step = 50
wait 100
ZoomRes all
VMD Tcl/Tk command:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://radifar.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Lets Create A Domain-Specific Language for Molecular Interaction Analysis!","item":"https://radifar.github.io/posts/lets-create-domain-specific-language-molecular-interaction-analysis/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Lets Create A Domain-Specific Language for Molecular Interaction Analysis!","name":"Lets Create A Domain-Specific Language for Molecular Interaction Analysis!","description":"What is a Domain-Specific Language? It is more common than you think. Few of us – computational chemists – have heard the term Domain-Specific Language (DSL for short), even though this is somewhat ubiquitous in our workflow, especially when dealing with molecule visualisation. Don\u0026rsquo;t you believe me? Check out the command you type on VMD, PyMOL, YASARA, or Chimera.\nYASARA command:\nLoadPDB 1crn, download=yes AutoPosOriObj 1, x = 1, y = 10, z = 0, alpha = 0, beta = 0, gamma = 0 ColorRes cys, green ShowRes cys BallStickRes cys AutoRotateObj 1, Y = 1 wait 180 AutoRotateObj 1, Y = 0 ZoomRes Cys 16, step = 50 wait 100 ZoomRes all VMD Tcl/Tk command:\n","keywords":["python","lark","DSL","interaction-fingerprinting"],"articleBody":"What is a Domain-Specific Language? It is more common than you think. Few of us – computational chemists – have heard the term Domain-Specific Language (DSL for short), even though this is somewhat ubiquitous in our workflow, especially when dealing with molecule visualisation. Don’t you believe me? Check out the command you type on VMD, PyMOL, YASARA, or Chimera.\nYASARA command:\nLoadPDB 1crn, download=yes AutoPosOriObj 1, x = 1, y = 10, z = 0, alpha = 0, beta = 0, gamma = 0 ColorRes cys, green ShowRes cys BallStickRes cys AutoRotateObj 1, Y = 1 wait 180 AutoRotateObj 1, Y = 0 ZoomRes Cys 16, step = 50 wait 100 ZoomRes all VMD Tcl/Tk command:\nset crystal [atomselect top \"all\"] $crystal moveby {10 0 0} $crystal move [transaxis x 40 deg] set sel [atomselect top \"hydrophobic and alpha\"] $sel get resname $sel get resid $sel get {resname resid} $sel get {x y z} graphics top cylinder {15 0 0} {15 0 10} radius 10 resolution 60 filled no graphics top cylinder {0 0 0} {-15 0 10} radius 5 resolution 60 filled yes graphics top cone {40 0 0} {40 0 10} radius 10 resolution 60 graphics top sphere {65 0 5} radius 10 resolution 80 graphics top triangle {80 0 0} {85 0 10} {90 0 0} graphics top text {40 0 20} \"my drawing objects\" PyMOL command:\nselect active, (resi 14-20,38) and chain A zoom active hide all show stick, active select active_water, ( (resi 38 and name ND2 and chain A) around 3.5) and (resn HOH) show spheres, active_water alter active_water, vdw=0.5 rebuild isomesh mesh1, 2fofc.map, 1.0, (resi 14-20,38 and chain A), carve=1.6 isomesh mesh1, 2fofc.map, 1.0, active, carve=1.6 color grey, mesh1 bg_color white As you can see, DSL is a programming language that is… well, as it says, dealing with a specific domain. For example, the DSL used by YASARA, PyMOL, and VMD is for molecular file I/O processing, molecule selection, manipulation, and visualisation. In other words, those DSLs are specifically targeting molecular information, model, and visualisation domain.\nSome other well-known DSLs include R, Matlab, SQL, HTML\u0026CSS, and spreadsheet formulas, which correspond to statistics, modeling, database, webpage, and spreadsheet domain.\nBut then, what are the differences between General Programming Languages (GPLs) like Java, C++, Fortran, or Python compared to DSL? Also, wouldn’t it be too much hassle for us to learn a programming language to solve a specific problem? Compared to GPLs, DSL is far simpler because DSL uses far more limited vocabulary, grammar, and syntax. Using vocabulary specific to a particular domain alone is already lowering the learning barrier significantly since the domain expert (e.g., computational chemist) is familiar with the DSL commands (verb or noun). And thus, the domain expert could correlate most of the commands with their mental model. For example, even when a computational chemist never used VMD before, (s)he will immediately understand what protein and within 4.5 of resname TPF means.\nWell, of course, since the commands and operations in DSL are not as rich as GPL, wouldn’t that make DSL less expressive than GPL? Ideally, the DSL should be expressive enough to allow the domain expert to solve every problem that (s)he faces in a specific domain. Therefore DSL should be as simple as possible yet still allow the domain expert to express the solution to their problem.\nVoelter, in his book DSL Engineering (2013), explains that one should attempt to make DSL as close as possible to its target domain (Figure 1). Also, ideally, the DSL should not be under-approximated, in which case it lacks the capability to express the solution in its target domain. On the other hand, it should not over-approximate where it is way too complicated (or overengineered) so that it is capable of doing the operation or implementation that is not required, which is somewhat similar to violating the YAGNI principle (Figure 2).\nFigure 1. Program Domain and Program Language are subsets of Program sets. DSL (program language) is supposed to overlap as much as possible with its target domain.\nFigure 2. PL 1 is Program Language 1 (DSL 1) and PL 2 is Program Language 2 (DSL 2), PL 1 is under-approximated while PL 2 is over-approximated.\nOverall, when DSL is carefully designed and implemented, it can be a powerful yet concise tool for domain experts to express the solution in the target domain.\nI believe that is enough explanation for DSL. I choose to explain DSL first so that I can explain to you why we need DSL for molecular interaction analysis in the next section.\nIs it really necessary to bring DSL to molecular interaction analysis? As someone who has been dealing with interaction fingerprinting for more than a decade, I am fully aware of the severe limitation of the solution that can be offered by an Interaction Fingerprinting (IFP) tool.\nFor example, the IFP tools are usually running according to the choices specified in the configuration file. In other cases, it uses a simple form or wizard using GUI or web interface. This way, the path that can be taken is very limited because:\nThe developers expect the users to take only the happy path so that nothing can go wrong. Many things have been taken care of under the hood so that the users do not have to deal with so many technical-level details. Integrating a new solution into the existing software is difficult. For example, in electrostatic interaction analysis, to modify the atom typing algorithm for positively charged atoms, you have to change the code or SMARTS pattern that identifies the positively charged atoms. One way to overcome this is by providing a plugin system that allows the user to integrate a new solution into the IFP tool. FingeRNAt uses this approach to allow user-defined interaction. On the other end of the spectrum, there is ProLIF, a Python library for molecular interaction analysis. This means that rather than using a command line + configuration file or graphical interface, it uses a series of commands that will be executed. The benefit of this approach is the expressiveness of this tool, as it gives the user more control starting from which molecular fragment to analyze, the result from presentation for reporting or further analysis, adding or changing the geometry rule for a particular interaction, and of course defining new scoring function for interaction similarity.\nThe only caveat is, first of all, you should be able to use Python language to a certain degree of mastery. Second, if you are doing an edge case study, there is a chance you have to extend the deeper level implementation in ProLIF which IMO is not trivial.\nAlso, although in theory, it is possible to express every program domain using Python, ProLIF, and RDKit (as one of ProLIF dependencies), in practice trying to implement a program domain that is not implemented by the ProLIF library will not be easy. For example, we can observe in the ProLIF community that few demanded ProLIF be able to present the interaction result at the atomic level. And to overcome this limitation, the ProLIF developer has to change the core source code so that the interactions are not only registered at the residue level but also at the atomic level.\nWhichever the tools that computational chemist use, it seems like there is no end to the creativity and expressiveness in interaction fingerprinting. The feature demands for IFP tools are incredible, starting from support for various file formats, geometric criteria for each interaction, atom typing, molecular interaction variety (nonpolar, electrostatic, pi, etc.), similarity scoring and weighting algorithm, molecule preparation, and presentation of the analysis result. The vastness of the workflow and use case for this methodology could overwhelm the developer of the IFP tool.\nNow that we have seen the good and the bad of each end of the spectrum and a glimpse of the complexity of molecular interaction analysis, I suppose it is time for me to explain how a Domain Specific Language could be a better alternative.\nFirst, let’s create an imaginary language to analyse the internal nonpolar interaction inside the protein.\nopen 1znm.pdb select \"protein\" as prot measure nonpolar in prot present nonpolar at atomic level Looks very neat isn’t it? Next, let us specify our atom typing for nonpolar atoms, and then store the result in zinc_finger_nonpolar.txt file.\nopen 1znm.pdb select \"protein\" as prot specify nonpolar atom with smarts_pattern \"[$([CH3X4,CH2X3,CH1X2,F,Cl,Br,I])\u0026!$(**[CH3X4,CH2X3,CH1X2,F,Cl,Br,I])]\" measure nonpolar in prot present nonpolar at atomic level into zinc_finger_nonpolar.txt Last, another imaginary language to analyse four different interactions between two molecules:\nopen 6ma7.pdb select \"protein\" as prot select \"resname TPF\" as fluconazole measure nonpolar, hbond, electrostatic, pi between prot and fluconazole present all at bitstring level into cyp3a4_bitstring.txt They may seem so simple at first, but what is so incredible and beautiful about this language is how clear and concise yet at the same time, it can incorporate each detail step by step.\nAnd needlessly to say, it is still very simple and may look like a toy. To make it far more powerful we will have to decide the (molecular interaction) domain we are trying to cover. Then we can decide how much control or implementation we could bestow upon our dear user. Something that I will present in the next post.\nRevision Note: Oct 25, 2023: Add link to ProLIF feature request ","wordCount":"1561","inLanguage":"en","image":"https://radifar.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2023-05-05T04:15:02.16Z","dateModified":"2023-05-05T04:15:02.16Z","author":{"@type":"Person","name":"Muhammad Radifar"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://radifar.github.io/posts/lets-create-domain-specific-language-molecular-interaction-analysis/"},"publisher":{"@type":"Organization","name":"Radifar","logo":{"@type":"ImageObject","url":"https://radifar.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://radifar.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://radifar.github.io/favicon.ico alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://radifar.github.io/about/ title=about><span>about</span></a></li><li><a href=https://radifar.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://radifar.github.io/series/ title=series><span>series</span></a></li><li><a href=https://radifar.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://radifar.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://radifar.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://radifar.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://radifar.github.io/posts/>Posts</a></div><h1 class=post-title>Lets Create A Domain-Specific Language for Molecular Interaction Analysis!</h1><div class=post-meta><span title='2023-05-05 04:15:02.16 +0000 UTC'>May 5, 2023</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1561 words&nbsp;·&nbsp;Muhammad Radifar&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2023-05-05-lets-create-a-domain-specific-language-for-molecular-interaction-analysis.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#what-is-a-domain-specific-language-it-is-more-common-than-you-think>What is a Domain-Specific Language? It is more common than you think.</a></li><li><a href=#is-it-really-necessary-to-bring-dsl-to-molecular-interaction-analysis>Is it really necessary to bring DSL to molecular interaction analysis?</a><ul><li></li></ul></li></ul></nav></div></details></div><div class=notice--info><p>This post is part of the <a href=https://radifar.github.io/series/Deemian-DSL/ style=font-weight:700>Deemian-DSL</a> series.</p><hr></div><div class=post-content><h2 id=what-is-a-domain-specific-language-it-is-more-common-than-you-think>What is a Domain-Specific Language? It is more common than you think.<a hidden class=anchor aria-hidden=true href=#what-is-a-domain-specific-language-it-is-more-common-than-you-think>#</a></h2><p>Few of us – computational chemists – have heard the term Domain-Specific Language (DSL for short), even though this is somewhat ubiquitous in our workflow, especially when dealing with molecule visualisation. Don&rsquo;t you believe me? Check out the command you type on VMD, PyMOL, YASARA, or Chimera.</p><p>YASARA command:</p><pre tabindex=0><code class=language-yasara data-lang=yasara>LoadPDB 1crn, download=yes
AutoPosOriObj 1, x = 1, y = 10, z = 0, alpha = 0, beta = 0, gamma = 0
ColorRes cys, green
ShowRes cys
BallStickRes cys
AutoRotateObj 1, Y = 1
wait 180
AutoRotateObj 1, Y = 0
ZoomRes Cys 16, step = 50
wait 100
ZoomRes all
</code></pre><p>VMD Tcl/Tk command:</p><pre tabindex=0><code class=language-tcl/tk data-lang=tcl/tk>set crystal [atomselect top &#34;all&#34;]
$crystal moveby {10 0 0}
$crystal move [transaxis x 40 deg]
set sel [atomselect top &#34;hydrophobic and alpha&#34;]
$sel get resname
$sel get resid
$sel get {resname resid}
$sel get {x y z}

graphics top cylinder {15 0 0} {15 0 10} radius 10 resolution 60 filled no
graphics top cylinder {0 0 0} {-15 0 10} radius 5 resolution 60 filled yes
graphics top cone {40 0 0} {40 0 10} radius 10 resolution 60
graphics top sphere {65 0 5} radius 10 resolution 80
graphics top triangle {80 0 0} {85 0 10} {90 0 0}
graphics top text {40 0 20} &#34;my drawing objects&#34;
</code></pre><p>PyMOL command:</p><pre tabindex=0><code class=language-Pymol data-lang=Pymol>select active, (resi 14-20,38) and chain A
zoom active
hide all
show stick, active
select active_water, ( (resi 38 and name ND2 and chain A) around 3.5) and (resn HOH)
show spheres, active_water
alter active_water, vdw=0.5
rebuild
isomesh mesh1, 2fofc.map, 1.0, (resi 14-20,38 and chain A), carve=1.6
isomesh mesh1, 2fofc.map, 1.0, active, carve=1.6
color grey, mesh1
bg_color white
</code></pre><p>As you can see, DSL is a programming language that is&mldr; well, as it says, dealing with a specific domain. For example, the DSL used by YASARA, PyMOL, and VMD is for molecular file I/O processing, molecule selection, manipulation, and visualisation. In other words, those DSLs are specifically targeting molecular information, model, and visualisation domain.</p><p>Some other well-known DSLs include R, Matlab, SQL, HTML&amp;CSS, and spreadsheet formulas, which correspond to statistics, modeling, database, webpage, and spreadsheet domain.</p><p>But then, what are the differences between General Programming Languages (GPLs) like Java, C++, Fortran, or Python compared to DSL? Also, wouldn&rsquo;t it be too much hassle for us to learn a programming language to solve a specific problem? Compared to GPLs, DSL is far simpler because DSL uses far more limited vocabulary, grammar, and syntax. Using vocabulary specific to a particular domain alone is already lowering the learning barrier significantly since the domain expert (e.g., computational chemist) is familiar with the DSL commands (verb or noun). And thus, the domain expert could correlate most of the commands with their mental model. For example, even when a computational chemist never used VMD before, (s)he will immediately understand what <code>protein and within 4.5 of resname TPF</code> means.</p><p>Well, of course, since the commands and operations in DSL are not as rich as GPL, wouldn&rsquo;t that make DSL less expressive than GPL? Ideally, the DSL should be expressive enough to allow the domain expert to solve every problem that (s)he faces in a specific domain. Therefore DSL should be as simple as possible yet still allow the domain expert to express the solution to their problem.</p><p>Voelter, in his book <a href=http://voelter.de/books.html>DSL Engineering</a> (2013), explains that one should attempt to make DSL as close as possible to its target domain (Figure 1). Also, ideally, the DSL should not be under-approximated, in which case it lacks the capability to express the solution in its target domain. On the other hand, it should not over-approximate where it is way too complicated (or overengineered) so that it is capable of doing the operation or implementation that is not required, which is somewhat similar to violating the <a href=https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it>YAGNI principle</a> (Figure 2).</p><p><img alt="program domain and program language is subset of programmable sets, program domain and program language have some overlap and more overlap is better." loading=lazy src=/assets/img/problem-language-domain.png></p><p>Figure 1. Program Domain and Program Language are subsets of Program sets. DSL (program language) is supposed to overlap as much as possible with its target domain.</p><p><img alt="Program Language 1 is subset inside Program Domain subset, Program Domain is subset inside Program Language 2 subset." loading=lazy src=/assets/img/overapproximate-underapproximate-language.png></p><p>Figure 2. <code>PL 1</code> is Program Language 1 (DSL 1) and <code>PL 2</code> is Program Language 2 (DSL 2), <code>PL 1</code> is under-approximated while <code>PL 2</code> is over-approximated.</p><p>Overall, when DSL is carefully designed and implemented, it can be a powerful yet concise tool for domain experts to express the solution in the target domain.</p><p>I believe that is enough explanation for DSL. I choose to explain DSL first so that I can explain to you why we need DSL for molecular interaction analysis in the next section.</p><h2 id=is-it-really-necessary-to-bring-dsl-to-molecular-interaction-analysis>Is it really necessary to bring DSL to molecular interaction analysis?<a hidden class=anchor aria-hidden=true href=#is-it-really-necessary-to-bring-dsl-to-molecular-interaction-analysis>#</a></h2><p>As someone who has been dealing with interaction fingerprinting for more than a decade, I am fully aware of the severe limitation of the solution that can be offered by an Interaction Fingerprinting (IFP) tool.</p><p>For example, the IFP tools are usually running according to the choices specified in the configuration file. In other cases, it uses a simple form or wizard using GUI or web interface. This way, the path that can be taken is very limited because:</p><ol><li>The developers expect the users to take only the happy path so that nothing can go wrong.</li><li>Many things have been taken care of under the hood so that the users do not have to deal with so many technical-level details.</li><li>Integrating a new solution into the existing software is difficult. For example, in electrostatic interaction analysis, to modify the atom typing algorithm for positively charged atoms, you have to change the code or SMARTS pattern that identifies the positively charged atoms.
One way to overcome this is by providing a plugin system that allows the user to integrate a new solution into the IFP tool. FingeRNAt uses this approach to <a href=https://github.com/n-szulc/fingeRNAt/#user-defined-interactions>allow user-defined interaction</a>.</li></ol><p>On the other end of the spectrum, there is <a href=https://doi.org/10.1186/s13321-021-00548-6>ProLIF</a>, a Python library for molecular interaction analysis. This means that rather than using a command line + configuration file or graphical interface, it uses a series of commands that will be executed. The benefit of this approach is the expressiveness of this tool, as it gives the user more control starting from which molecular fragment to analyze, the result from presentation for reporting or further analysis, adding or changing the geometry rule for a particular interaction, and of course defining new scoring function for interaction similarity.</p><p>The only caveat is, first of all, you should be able to use Python language to a certain degree of mastery. Second, if you are doing an edge case study, there is a chance you have to extend the deeper level implementation in ProLIF which IMO is not trivial.</p><p>Also, although in theory, it is possible to express every program domain using Python, ProLIF, and RDKit (as one of ProLIF dependencies), in practice trying to implement a program domain that is not implemented by the ProLIF library will not be easy. For example, we can observe in the ProLIF community that <a href=https://github.com/chemosim-lab/ProLIF/issues/56>few</a> <a href=https://github.com/chemosim-lab/ProLIF/issues/71>demanded</a> ProLIF be able to present the interaction result at the atomic level. And to overcome this limitation, the ProLIF developer <a href=https://github.com/chemosim-lab/ProLIF/pull/116>has to change the core source code</a> so that the interactions are not only registered at the residue level but also at the atomic level.</p><p>Whichever the tools that computational chemist use, it seems like there is no end to the creativity and expressiveness in interaction fingerprinting. The feature demands for IFP tools are incredible, starting from support for various file formats, geometric criteria for each interaction, atom typing, molecular interaction variety (nonpolar, electrostatic, pi, etc.), similarity scoring and weighting algorithm, molecule preparation, and presentation of the analysis result. The vastness of the workflow and use case for this methodology could overwhelm the developer of the IFP tool.</p><p>Now that we have seen the good and the bad of each end of the spectrum and a glimpse of the complexity of molecular interaction analysis, I suppose it is time for me to explain how a Domain Specific Language could be a better alternative.</p><p>First, let&rsquo;s create an imaginary language to analyse the internal nonpolar interaction inside the protein.</p><pre tabindex=0><code class=language-imaginary-dsl data-lang=imaginary-dsl>open 1znm.pdb
select &#34;protein&#34; as prot
measure nonpolar in prot
present nonpolar at atomic level
</code></pre><p>Looks very neat isn&rsquo;t it? Next, let us specify our atom typing for nonpolar atoms, and then store the result in <code>zinc_finger_nonpolar.txt</code> file.</p><pre tabindex=0><code class=language-imaginary-dsl data-lang=imaginary-dsl>open 1znm.pdb
select &#34;protein&#34; as prot
specify nonpolar atom with smarts_pattern &#34;[$([CH3X4,CH2X3,CH1X2,F,Cl,Br,I])&amp;!$(**[CH3X4,CH2X3,CH1X2,F,Cl,Br,I])]&#34;
measure nonpolar in prot
present nonpolar at atomic level into zinc_finger_nonpolar.txt
</code></pre><p>Last, another imaginary language to analyse four different interactions between two molecules:</p><pre tabindex=0><code class=language-imaginary-dsl data-lang=imaginary-dsl>open 6ma7.pdb
select &#34;protein&#34; as prot
select &#34;resname TPF&#34; as fluconazole
measure nonpolar, hbond, electrostatic, pi between prot and fluconazole
present all at bitstring level into cyp3a4_bitstring.txt
</code></pre><p>They may seem so simple at first, but what is so incredible and beautiful about this language is how clear and concise yet at the same time, it can incorporate each detail step by step.</p><p>And needlessly to say, it is still very simple and may look like a toy. To make it far more powerful we will have to decide the (molecular interaction) domain we are trying to cover. Then we can decide how much control or implementation we could bestow upon our dear user. Something that I will present in the next post.</p><h4 id=revision-note>Revision Note:<a hidden class=anchor aria-hidden=true href=#revision-note>#</a></h4><ol><li>Oct 25, 2023: Add link to ProLIF feature request</li></ol></div><div class=post-series><h3 id=series>This series</h3><ol><li><b>Lets Create A Domain-Specific Language for Molecular Interaction Analysis!</b></li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://radifar.github.io/tags/python/>Python</a></li><li><a href=https://radifar.github.io/tags/lark/>Lark</a></li><li><a href=https://radifar.github.io/tags/DSL/>DSL</a></li><li><a href=https://radifar.github.io/tags/interaction-fingerprinting/>Interaction-Fingerprinting</a></li></ul><nav class=paginav><a class=prev href=https://radifar.github.io/posts/2025-02-14-protonation-state-determination-of-amino-acid-residues-for-molecular-modeling-and-molecular-simulation/><span class=title>« Prev</span><br><span>Protonation state determination of amino acid residues in Molecular Modeling and Molecular Simulation</span>
</a><a class=next href=https://radifar.github.io/posts/learn-open-babel-python-00-setup/><span class=title>Next »</span><br><span>Learn Open Babel in Python - 00 Setup</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Lets Create A Domain-Specific Language for Molecular Interaction Analysis! on x" href="https://x.com/intent/tweet/?text=Lets%20Create%20A%20Domain-Specific%20Language%20for%20Molecular%20Interaction%20Analysis%21&amp;url=https%3a%2f%2fradifar.github.io%2fposts%2flets-create-domain-specific-language-molecular-interaction-analysis%2f&amp;hashtags=python%2clark%2cDSL%2cinteraction-fingerprinting"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Lets Create A Domain-Specific Language for Molecular Interaction Analysis! on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fradifar.github.io%2fposts%2flets-create-domain-specific-language-molecular-interaction-analysis%2f&amp;title=Lets%20Create%20A%20Domain-Specific%20Language%20for%20Molecular%20Interaction%20Analysis%21&amp;summary=Lets%20Create%20A%20Domain-Specific%20Language%20for%20Molecular%20Interaction%20Analysis%21&amp;source=https%3a%2f%2fradifar.github.io%2fposts%2flets-create-domain-specific-language-molecular-interaction-analysis%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Lets Create A Domain-Specific Language for Molecular Interaction Analysis! on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fradifar.github.io%2fposts%2flets-create-domain-specific-language-molecular-interaction-analysis%2f&title=Lets%20Create%20A%20Domain-Specific%20Language%20for%20Molecular%20Interaction%20Analysis%21"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Lets Create A Domain-Specific Language for Molecular Interaction Analysis! on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fradifar.github.io%2fposts%2flets-create-domain-specific-language-molecular-interaction-analysis%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Lets Create A Domain-Specific Language for Molecular Interaction Analysis! on whatsapp" href="https://api.whatsapp.com/send?text=Lets%20Create%20A%20Domain-Specific%20Language%20for%20Molecular%20Interaction%20Analysis%21%20-%20https%3a%2f%2fradifar.github.io%2fposts%2flets-create-domain-specific-language-molecular-interaction-analysis%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Lets Create A Domain-Specific Language for Molecular Interaction Analysis! on telegram" href="https://telegram.me/share/url?text=Lets%20Create%20A%20Domain-Specific%20Language%20for%20Molecular%20Interaction%20Analysis%21&amp;url=https%3a%2f%2fradifar.github.io%2fposts%2flets-create-domain-specific-language-molecular-interaction-analysis%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Lets Create A Domain-Specific Language for Molecular Interaction Analysis! on ycombinator" href="https://news.ycombinator.com/submitlink?t=Lets%20Create%20A%20Domain-Specific%20Language%20for%20Molecular%20Interaction%20Analysis%21&u=https%3a%2f%2fradifar.github.io%2fposts%2flets-create-domain-specific-language-molecular-interaction-analysis%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//radifar-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://radifar.github.io/>Radifar</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>